<div class="container mt-5">

    <h1 class="text-white mb-5 text-center" style="font-weight: bold; font-size: 2.5rem;">
    <i class="fa fa-shield"></i> Gestión de Castings
  </h1>

  <!-- Botón para desplegar/ocultar formulario -->
  <div class="d-flex justify-content-center mb-4">
    <button class="btn btn-outline-light btn-sm" type="button" data-bs-toggle="collapse" data-bs-target="#castingForm" aria-expanded="false" aria-controls="castingForm">
      Agregar Nuevo Casting
    </button>
  </div>

  <!-- Formulario colapsable -->
  <div class="collapse" id="castingForm">
    <div class="p-4 shadow-lg rounded bg-dark text-white mb-5">
      <form (ngSubmit)="crearCasting()">
        <div class="mb-3">
          <label for="heroe" class="form-label"><b>Héroe</b></label>
          <select id="heroe" class="form-select bg-secondary text-white border-0" [(ngModel)]="unCasting.heroes_id._id" name="heroe" required>
            <option value="" disabled selected>Selecciona un héroe</option>
            <option *ngFor="let heroe of Heroes" [value]="heroe._id">{{ heroe.nombre }}</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="personaje" class="form-label"><b>Personaje</b></label>
          <input
            id="personaje"
            [(ngModel)]="unCasting.personaje"
            name="personaje"
            type="text"
            class="form-control bg-secondary text-white border-0"
            placeholder="Nombre del personaje o actor"
            required
          />
        </div>

        <div class="mb-3">
          <label for="pelicula" class="form-label"><b>Película</b></label>
          <select id="pelicula" class="form-select bg-secondary text-white border-0" [(ngModel)]="unCasting.peliculas_id._id" name="peliculas_id" required>
            <option value="" disabled selected>Selecciona una película</option>
            <option *ngFor="let pelicula of Peliculas" [value]="pelicula._id">{{ pelicula.titulo }}</option>
          </select>
        </div>

        <button type="submit" class="btn modern-btn-sm mt-3">Crear Casting</button>
      </form>
    </div>
  </div>

  <!-- Grid de Multimedia -->
  <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
    <ng-container *ngFor="let cast of Castings; let i = index">
      <div class="col">
        <div class="card modern-card h-100 text-white overflow-hidden">
          <img [src]="cast.peliculas_id.img" class="card-img" alt="{{ cast.peliculas_id.titulo }}">
          <div class="overlay d-flex flex-column justify-content-end p-3">
            <h5 class="card-title">{{ cast.peliculas_id.titulo }}</h5>
            <p class="card-text">Personaje: {{ cast.heroes_id.nombre }}</p>
            <div class="d-flex justify-content-between mt-2">
              <button type="button" class="btn btn-sm btn-danger overlay-btn" (click)="eliminarCasting(cast)">Eliminar</button>
              <button type="button" class="btn btn-sm btn-success overlay-btn" (click)="editarCasting(cast._id)">Editar</button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
  </div>

</div>
